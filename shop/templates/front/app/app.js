"use strict";angular.module("shopApp",["ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","ngMaterial","ngPersian","angucomplete-alt","angular-loading-bar"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$mdThemingProvider",function(a,b,c,d){b.otherwise("/"),d.theme("purple").primaryPalette("deep-purple"),d.theme("green").primaryPalette("green"),d.theme("blue").primaryPalette("blue"),c.html5Mode(!0)}]).run(function(){}).directive("disableAnimation",["$animate",function(a){return{restrict:"A",link:function(b,c,d){d.$observe("disableAnimation",function(b){a.enabled(!b,c)})}}}]).directive("pageTitle",function(){return{restrict:"EA",link:function(a,b){var c=b[0];c.hidden=!0;var d=function(){return c.innerHTML},e=function(a){document.title=a};a.$watch(d,e)}}}),angular.module("shopApp").controller("MainCtrl",["$scope","$http","Products",function(a,b,c){a.page=1,a.favorites=[],a.latest=[],a.currentPage=1,a.loadLatest=function(){c.latest({page:a.currentPage},function(b){a.latest=b.results})},a.loadLatest(),c.random({},function(b){a.favorites=b.results}),a.myInterval=5e3,a.slides=[{image:"/static/assets/images/slide1.jpg",text:"Slide 1"},{image:"/static/assets/images/slide2.jpg",text:"Slide 1"}]}]),angular.module("shopApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"})}]),angular.module("shopApp").controller("ProductCtrl",["$scope","$http","$mdDialog","Products","$stateParams",function(a,b,c,d,e){a.product=d.get({id:e.id},function(b){d.random({category:b.category.id},function(b){a.related=b.results})}),a.related=[],a.showImage=function(b,d){c.show({targetEvent:d,templateUrl:"app/product/dialog.html",locals:{image:a.product.images[b],imageId:b},controller:"DialogCtrl"})}}]).controller("DialogCtrl",["scope","$mdDialog","image",function(a,b,c){a.image=c,a.closeDialog=function(){b.hide()}}]),angular.module("shopApp").config(["$stateProvider",function(a){a.state("product",{url:"/product/:id/view/:name",templateUrl:"app/product/product.html",controller:"ProductCtrl"})}]),angular.module("shopApp").controller("SearchCtrl",["$scope","$http","$stateParams","Brands","Products",function(a,b,c,d,e){a.search={maxPrice:100},a.category=c.id,a.brands=d.query({category:a.category}),e.latest({category:a.category},function(b){a.products=b.results}),b.get("/data/products.json").success(function(b){a.result=b})}]),angular.module("shopApp").config(["$stateProvider",function(a){a.state("search",{url:"/search/:id/:name",templateUrl:"app/search/search.html",controller:"SearchCtrl"})}]),angular.module("shopApp").factory("Brands",["$resource",function(a){return a("/api/brands/:id",{id:"@id"})}]),angular.module("shopApp").controller("CarouselCtrl",["$scope",function(a){a.myInterval=5e3}]),angular.module("shopApp").factory("Categories",["$resource",function(a){return a("/api/categories/:id",{id:"@id"})}]),angular.module("shopApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("shopApp").controller("NavbarCtrl",["$scope","$state",function(a,b){a.menu=[{title:"صفحه اصلی",state:"main"}],a.isCollapsed=!0,a.search=function(a){b.go("product",a.originalObject)}}]).run(["$rootScope","Categories",function(a,b){a.categories=b.query()}]),angular.module("shopApp").directive("productsSidebar",function(){return{templateUrl:"components/products-sidebar/products-sidebar.html",restrict:"EA",scope:{products:"="},link:function(a,b,c){}}}),angular.module("shopApp").factory("Products",["$resource",function(a){return a("/api/products/:id",{id:"@id"},{random:{method:"GET",params:{random:!0}},latest:{method:"GET"},get:{transformResponse:function(a){a=angular.fromJson(a),a.properties=[];var b,c,d,e,f,g,h={};for(b=0;b<a.category.structures.length;b++)for(d=a.category.structures[b],h[d.name]={},c=0;c<d.properties.length;c++)h[d.name][d.properties[c].name]=null;for(b=0;b<a.details.length;b++){e=a.details[b];for(g in h)f=h[g],"undefined"!=typeof f[e.property]&&(f[e.property]=e.value)}return a.properties=h,a}}})}]),angular.module("shopApp").run(["$templateCache",function(a){a.put("app/main/main.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><page-title>فروشگاه چلسی</page-title><div class=container><div class=row><div class=col-lg-3><md-toolbar class=md-theme-light><h1 class=md-toolbar-tools><span>محبوب‌ترین کالاها</span></h1></md-toolbar><products-sidebar products=favorites></products-sidebar><md-toolbar md-theme=purple style="margin-top: 30px"><h1 class=md-toolbar-tools><span>اعتبارات</span></h1></md-toolbar><md-content class="md-whiteframe-z1 text-center md-padding"><img src=/static/assets/images/namad2.png alt=""></md-content></div><div class=col-lg-9><div ng-init="slides=[{\n        image: \'/static/assets/images/slide1.jpg\'\n        },{\n        image: \'/static/assets/images/slide2.jpg\'\n        }]"><div ng-include="\'components/carousel/carousel.html\'"></div></div><md-toolbar md-theme=green style="margin-top: 30px"><h1 class=md-toolbar-tools>جدیدترین محصولات</h1></md-toolbar><md-content class="md-whiteframe-z1 md-padding"><div class=row><div class="col-md-3 text-center" ng-repeat="item in latest"><md-card class=md-whiteframe-z1><img ng-src="{{ item.image }}" alt="{{ item.name }}"><md-card-content><h5 class=en>{{ item.long_name }}</h5><span class=span>{{ item.price | number:0 | pNumber }} ریال</span><div style="padding-top: 10px"><md-button ui-sref=product(item) class=md-warn><i class="fa fa-search"></i> مشاهده جزئیات</md-button></div></md-card-content></md-card></div></div><div class=row><div class=col-lg-12><pagination total-items=totalItems ng-model=currentPage ng-change=loadLatest() items-per-page=16 next-text=بعدی previous-text=قبلی first-text=ابتدا last-text=انتها></pagination></div></div></md-content></div></div></div>'),a.put("app/product/dialog.html",'<md-dialog aria-label="List dialog"><md-content class=text-center><img style="max-height: 500px" class=img-responsive ng-src={{image}}></md-content><div class=md-actions><md-button ng-click=closeDialog()>بستن پنجره</md-button></div></md-dialog>'),a.put("app/product/product.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><page-title>{{ product.name }} - فروشگاه چلسی</page-title><div class=container><div class=row><div class=col-lg-3><md-toolbar class=md-theme-light><h1 class=md-toolbar-tools><span>کالاهای مشابه</span></h1></md-toolbar><products-sidebar products=related></products-sidebar><md-toolbar md-theme=blue style="margin-top: 30px"><h1 class=md-toolbar-tools><span>اعتبارات</span></h1></md-toolbar><md-content class="md-whiteframe-z1 text-center md-padding"><img src=/static/assets/images/namad2.png alt="Namad"></md-content></div><div class=col-lg-9 layout=column><md-toolbar md-theme=green><h1 class=md-toolbar-tools><span>اطلاعات کالا</span></h1></md-toolbar><md-content class="md-whiteframe-z1 md-padding"><div class=row><div class=col-md-4><div class=thumbnail><img class=img-responsive ng-src="{{ product.image }}" alt="{{product.name}}"></div><div class="slider row"><div class=col-md-4 ng-repeat="image in product.images"><a ng-click="showImage($index, $event)" class=thumbnail><img ng-src={{image}} alt="{{product.name}}"></a></div></div></div><div class=col-md-8><div ng-bind=product.description></div><hr><div class=price>قیمت: <span class=text-success>{{ product.price | number:0 | pNumber }}</span> ریال</div><p>معادل <small><strong>{{(product.price/10) | pDigitWords}}</strong> تومان</small></p><small ng-class="{\'text-success\': product.available, \'text-danger\': ! product.available}">موجود {{product.available ? \'است\' : \'نیست\'}} <i class=fa ng-class="{\'fa-check\': product.available, \'fa-remove\': ! product.available}"></i></small></div></div></md-content><md-toolbar md-theme=purple style="margin-top: 30px"><h1 class=md-toolbar-tools><span>مشخصات فنی</span></h1></md-toolbar><md-content class=md-whiteframe-z1><div class=product-properties><table ng-repeat="(title,properties) in product.properties" class="table table-striped table-hover"><caption ng-bind=title></caption><tbody><tr ng-repeat="(i,item) in properties" ng-if="item!==null"><th ng-bind=i style="width: 30%"></th><td ng-bind=item></td></tr></tbody></table></div></md-content></div></div></div>'),a.put("app/search/search.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><page-title>{{ product.name }} - فروشگاه چلسی</page-title><div class=container><div class=row><div class=col-lg-3><md-toolbar class=md-theme-light><h1 class=md-toolbar-tools><span>جستجوی محصول</span></h1></md-toolbar><md-content class="md-whiteframe-z1 md-padding"><div><label style="display: block">حداکثر قیمت <small class=pull-left>{{(search.maxPrice*100000)|number:0|pNumber}} ریال</small></label><md-slider flex aria-label="حداکثر قیمت" min=10 max=1000 ng-model=search.maxPrice></md-slider></div><div><label>سازنده</label><div><md-select ng-model=search.brand placeholder="انتخاب کنید"><md-option ng-repeat="brand in brands" value={{brand.id}}>{{brand.name}}</md-option></md-select></div></div><div><md-button class="md-primary pull-left"><i class="fa fa-search"></i> جستجو</md-button></div></md-content></div><div class=col-lg-9 layout=column><md-toolbar md-theme=green><h1 class=md-toolbar-tools>نتایج جستجو</h1></md-toolbar><md-content class="md-whiteframe-z1 md-padding"><div class=row><div class="col-md-3 text-center" ng-repeat="item in products"><md-card class=md-whiteframe-z1><img ng-src="{{ item.image }}" alt="{{ item.name }}"><md-card-content><h5 class=en>{{ item.long_name }}</h5><span class=span>{{ item.price | number:0 | pNumber }} ریال</span><div style="padding-top: 10px"><md-button ui-sref=product(item) class=md-warn><i class="fa fa-search"></i> مشاهده جزئیات</md-button></div></md-card-content></md-card></div></div><div class=row><div class=col-lg-12><pagination total-items=totalItems ng-model=currentPage ng-change=loadLatest() items-per-page=16 next-text=بعدی previous-text=قبلی first-text=ابتدا last-text=انتها></pagination></div></div></md-content></div></div></div>'),a.put("components/carousel/carousel.html",'<div ng-controller=CarouselCtrl><div style="max-height: 350px"><carousel interval=myInterval disable-animation=true><slide ng-repeat="slide in slides" active=slide.active><img ng-src={{slide.image}} style=margin:auto><div class=carousel-caption><h4 ng-if=slide.title>{{slide.title}}</h4><p ng-if=slide.text>{{slide.text}}</p></div></slide></carousel></div></div>'),a.put("components/footer/footer.html",'<footer><div class=container></div><div class=copyright><div class="container text-center">تمامی حوق این وب‌سایت محفوظ و متعلق به فروشگاه چلسی می‌باشد.</div></div></footer>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div ng-controller=NavbarCtrl><div class="navbar navbar-inverse navbar-static-top"><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>منو</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="/" class=navbar-brand>فروشگاه چلسی‌</a></div><div collapse=isCollapsed class="navbar-collapse navbar-right collapse" id=navbar-main><ul class="nav navbar-nav"><li ui-sref-active=active ng-repeat="item in menu"><a ui-sref="{{ item.state }}" ng-bind=item.title></a></li></ul></div></div></div><div class=min-navbar><div class=container><ul><li ng-repeat="category in categories"><a ui-sref=search(category) ng-bind=category.name></a></li></ul><div class=pull-left><div class=input-group><div style="display: table-cell" angucomplete-alt class=input-group placeholder="محصول مورد نظرتان را پیدا کنید ..." pause=500 remote-url="/api/products/search?query=" remote-url-data-field=results text-no-results="نتیجه‌ای یافت نشد." remote-url-request-formatter=remoteUrlRequestFn text-searching="در حال دریافت اطلاعات" search-fields=q title-field=name description-field=long_name image-field=image minlength=2 input-class="form-control form-control-small input-sm" match-class=highlight template-url=components/navbar/search.html selected-object=search></div><span class=input-group-btn><button class="btn btn-default btn-sm" type=button><i class="fa fa-search"></i></button></span></div></div></div></div></div>'),a.put("components/navbar/search.html",'<div class=angucomplete-holder ng-class="{\'angucomplete-dropdown-visible\': showDropdown}"><input ng-model=searchStr ng-disabled=disableInput placeholder={{placeholder}} ng-focus=onFocusHandler() class={{inputClass}} ng-focus=resetHideResults() ng-blur=hideResults($event) autocapitalize=off autocorrect=off autocomplete=off ng-change="inputChangeHandler(searchStr)"><div class=angucomplete-dropdown ng-show=showDropdown><div class=angucomplete-searching ng-show=searching ng-bind=textSearching></div><div class=angucomplete-searching ng-show="!searching && (!results || results.length == 0)" ng-bind=textNoResults></div><div class=angucomplete-row ng-repeat="result in results" ng-click=selectResult(result) ng-mouseenter=hoverRow($index) ng-class="{\'angucomplete-selected-row\': $index == currentIndex}"><div class=angucomplete-image-holder><img ng-src="{{ result.image }}" class="angucomplete-image"></div><div class=angucomplete-title ng-if=matchClass ng-bind-html=result.title></div><div class=angucomplete-title ng-if=!matchClass>{{ result.title }}</div><div ng-if="matchClass && result.description && result.description != \'\'" class=angucomplete-description ng-bind-html=result.description></div><div ng-if="!matchClass && result.description && result.description != \'\'" class=angucomplete-description>{{result.description}}</div></div></div></div>'),a.put("components/products-sidebar/products-sidebar.html",'<md-content class="md-whiteframe-z1 products"><md-item ng-repeat="item in products"><md-item-content><md-button class=md-tile-content ui-sref=product(item)><img ng-src="{{ item.image }}" alt="{{ item.name }}"><h3>{{ item.name }}</h3><h4 class=en>{{ item.long_name }}</h4></md-button></md-item-content><md-divider ng-if=!$last></md-divider></md-item></md-content>')}]);